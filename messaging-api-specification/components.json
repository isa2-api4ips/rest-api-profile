{
  "components" : {
    "schemas" : {
      "MessageReferenceList" : {
        "title" : "A Message Reference object defined by the ISA² IPS REST API Messaging API Specification",
        "required" : [ "messageReferenceList" ],
        "properties" : {
          "messageReferenceList" : {
            "description" : "List of message references.",
            "items" : {
              "$ref" : "#/components/schemas/MessageReference"
            },
            "type" : "array"
          },
          "count" : {
            "description" : "Count of all messages",
            "format" : "int32",
            "type" : "integer"
          },
          "limit" : {
            "description" : "limit number of references.",
            "format" : "int32",
            "type" : "integer"
          },
          "offset" : {
            "description" : "offset of references.",
            "format" : "int32",
            "type" : "integer"
          }
        },
        "description" : "A Message Reference object to be used when multiple messages could be retrieved from an API operation",
        "$id" : "https://raw.githubusercontent.com/isa2-api4ips/rest-api-profile/main/messaging-api-specification/components/schemas/message-reference-list.json",
        "$schema" : "https://json-schema.org/draft/2020-12/schema",
        "type" : "object"
      },
      "SignalMessage" : {
        "title" : "A Signal message which extends Problem object (RFC 7807) defined by the ISA² IPS REST API Core Profile",
        "required" : [ "instance", "status", "title", "type" ],
        "properties" : {
          "title" : {
            "description" : "A short summary of the problem type, written in English and readable for engineers (usually not suited for non technical stakeholders and not localized).",
            "example" : "Message Accepted",
            "type" : "string"
          },
          "type" : {
            "description" : "An URI reference that identifies the problem type. When dereferenced, it SHOULD provide human-readable documentation for the problem type (e.g. using HTML).",
            "format" : "uri",
            "example" : "https://github.com/isa2-api4ips/rest-api-profile/blob/main/messaging-api-specification/signal.md#message-accepted",
            "default" : "about:blank",
            "type" : "string"
          },
          "status" : {
            "minimum" : 200,
            "description" : "The HTTP status code generated by the origin server for this occurrence of the problem.",
            "format" : "int32",
            "example" : 202,
            "type" : "integer",
            "exclusiveMaximum" : 600
          },
          "detail" : {
            "description" : "A human-readable explanation specific to this occurrence of the problem.",
            "format" : "string",
            "type" : "string"
          },
          "instance" : {
            "description" : "A URI reference that identifies the specific occurrence of the problem. It may or may not yield further information if dereferenced.",
            "format" : "uri-reference",
            "type" : "string"
          },
          "digest" : {
            "description" : "The digest of the received message using the notation proposed in 'Digest Header' (https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-digest-headers).",
            "format" : "string",
            "example" : "sha-256=4REjxQ4yrqUVicfSKYNO/cF9zNj5ANbzgDZt3/h3Qxo=",
            "type" : "string"
          }
        },
        "additionalProperties" : false,
        "description" : "A Signal message which extends Problem object (RFC 7807) defined by the ISA² IPS REST API Core Profile",
        "$id" : "https://raw.githubusercontent.com/isa2-api4ips/rest-api-profile/main/messaging-api-specification/components/schemas/signal-message.json",
        "$schema" : "https://json-schema.org/draft/2020-12/schema",
        "type" : "object"
      },
      "JwsCompact" : {
        "title" : "JWT token",
        "pattern" : "^[A-Za-z0-9_-]+(?:\\.[A-Za-z0-9_-]+){2}$",
        "description" : "The JWS compact representation schema defines the string pattern as a regular expression, denoting the structure a JWS compact token MUST follow to be a valid compact JWS Representation. It is used for defining the value of the Original-Sender token.",
        "format" : "jws-compact",
        "$id" : "https://raw.githubusercontent.com/isa2-api4ips/rest-api-profile/main/messaging-api-specification/components/schemas/jws-compact.json",
        "$schema" : "https://json-schema.org/draft/2020-12/schema",
        "type" : "string"
      },
      "MessageReference" : {
        "title" : "A Message Reference object defined by the ISA² IPS REST API Messaging API Specification",
        "required" : [ "action", "href", "messageId", "service" ],
        "properties" : {
          "messageId" : {
            "description" : "The unique identifier of the message.",
            "type" : "string"
          },
          "service" : {
            "description" : "A representation of the service the message is submitted to.",
            "type" : "string"
          },
          "action" : {
            "description" : "A representation of the action related to the service the message is submitted to.",
            "type" : "string"
          },
          "href" : {
            "description" : "The direct link for getting the specific message",
            "format" : "uri-reference",
            "type" : "string"
          }
        },
        "description" : "A Message Reference object to be used when multiple messages could be retrieved from an API operation",
        "$id" : "https://raw.githubusercontent.com/isa2-api4ips/rest-api-profile/main/messaging-api-specification/components/schemas/message-reference.json",
        "$schema" : "https://json-schema.org/draft/2020-12/schema",
        "type" : "object"
      }
    },
    "parameters" : {
      "rMessageId" : {
        "name" : "rMessageId",
        "in" : "path",
        "description" : "The identifier of the response message being submitted. It MUST be generated by the client submitting the response message.",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      },
      "rService" : {
        "name" : "rService",
        "in" : "path",
        "description" : "The Response Service metadata defines the service under which the response message should be sent. It is combined with the Response Action metadata to provide a complete domain-level message target. The Response Service metadata MUST be a URL Safe string.",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      },
      "Response-Webhook" : {
        "name" : "Response-Webhook",
        "in" : "header",
        "description" : "The Response-Webhook provides the callback URL that the server MUST use for sending a response. It is required when implementing the \"Send Message with Asynchronous Response – Push and Webhook Push\" exchange pattern.",
        "required" : false,
        "schema" : {
          "format" : "uri",
          "type" : "string"
        }
      },
      "rAction" : {
        "name" : "rAction",
        "in" : "path",
        "description" : "The Response Action metadata defines the action of the service under which the response message should be sent. It is combined with the Response Service metadata to provide a complete domain-level target of the response message. The Response Action metadata MUST be a URL Safe string.",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      },
      "Original-Sender" : {
        "name" : "Original-Sender",
        "in" : "header",
        "description" : "The Original Sender is the entity that initiates the submission of the message. It is a single identifier and its representation is out of scope of the current specification.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "9999::333222111"
      },
      "service" : {
        "name" : "service",
        "in" : "path",
        "description" : "The Service metadata defines the service under which the message should be sent. It is combined with the Action metadata to provide a complete domain-level message target. The service metadata MUST be a URL Safe string.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "dsd-service"
      },
      "Final-Recipient" : {
        "name" : "Final-Recipient",
        "in" : "header",
        "description" : "The Final Recipient is the entity for whom the message is sent. Can be a single identifier or a set of identifiers, as described in the Recipient Addressing Schemes section of the specification. The representation of the final recipient is out of scope of the current specification.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "9999::333222112"
      },
      "messageId" : {
        "name" : "messageId",
        "in" : "path",
        "description" : "The MessageId is the unique identifier of the message submitted. It MUST be defined by the client. It is used for reliable messaging for guaranteeing the at-most-once message submission (no duplicate message-ids are allowed by the server implementing the API).",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "dde12f67-c391-4851-8fa2-c07dd8532efd"
      },
      "action" : {
        "name" : "action",
        "in" : "path",
        "description" : "The Action metadata defines the action of the service under which the message should be sent. It is combined with the Service metadata to provide a complete domain-level target of the message. The action metadata MUST be a URL Safe string.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "dsd-action"
      },
      "Original-Sender-Token" : {
        "name" : "Original-Sender-Token",
        "in" : "header",
        "description" : "The Original Sender represents the authenticated entity acting as the user that sends the message using the client. Following the API Core Profile, the original sender MUST be represented with an OpenID Connect token or a signed JWT in both the form of Compact JWT Token, which is carried under the Original-Sender-Token HTTP Field",
        "required" : true,
        "schema" : {
          "$ref" : "#/components/schemas/JwsCompact"
        },
        "example" : "eyJhbGciOiJIUzINiIsnRI6IkpXVCJ9.eyJzdWIiOiIxM0NTY3ODkwIiwibmIiwiaWF0IoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMePOk6yJV_adQssw5c"
      },
      "Signal-Webhook" : {
        "name" : "Signal-Webhook",
        "in" : "header",
        "description" : "The Signal-Webhook provides the callback URL that the server MUST use for sending a signal back. It is required when implementing the \"Send Message with Asynchronous Response – Push and Webhook Pull\" exchange pattern.",
        "required" : false,
        "schema" : {
          "format" : "uri",
          "type" : "string"
        }
      },
      "Timestamp" : {
        "name" : "Timestamp",
        "in" : "header",
        "description" : "The Timestamp is the exact date and time at which the message was sent. It is provided by the client and verified by the server.",
        "required" : true,
        "schema" : {
          "format" : "date-time",
          "type" : "string"
        },
        "example" : "2021-06-17T08:30:00Z"
      }
    },
    "headers" : {
      "Action" : {
        "description" : "When, in synchronous responses, the rAction URL parameter cannot be used for providing the action of the service of the response message, the Action header field can be used instead for the purpose. It is combined with the service from the Service header field to provide a complete domain-level message target.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "dsd-action"
      },
      "Original-Sender" : {
        "description" : "The Original Sender is the entity that initiates the submission of the message. It is a single identifier and its representation is out of scope of the current specification.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "9999::333222111"
      },
      "Content-Disposition" : {
        "description" : "The Content-Disposition header, declaring the subpart as an attachment. MUST be Attachment Type ",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "Attachment"
      },
      "Final-Recipient" : {
        "description" : "The Final Recipient is the entity for whom the message is sent. Can be a single identifier or a set of identifiers, as described in the Recipient Addressing Schemes section of the specification. The representation of the final recipient is out of scope of the current specification.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "9999::333222112"
      },
      "Service" : {
        "description" : "When, in synchronous responses, the rService URL parameter cannot be used for providing the service of the response message, the Service header field can be used instead for the purpose. It is combined with the action from the Action header field to provide a complete domain-level message target.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "dsd-service"
      },
      "Original-Sender-Token" : {
        "description" : "The Original Sender represents the authenticated entity acting as the user that sends the message using the client. Following the API Core Profile, the original sender MUST be represented with an OpenID Connect token or a signed JWT in both the form of Compact JWT Token, which is carried under the Original-Sender-Token HTTP Field",
        "required" : true,
        "schema" : {
          "$ref" : "#/components/schemas/JwsCompact"
        },
        "example" : "eyJhbGciOiJIUzINiIsnRI6IkpXVCJ9.eyJzdWIiOiIxM0NTY3ODkwIiwibmIiwiaWF0IoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMePOk6yJV_adQssw5c"
      },
      "Message-Id" : {
        "description" : "When the rMessageId URL parameter can't be used for providing the identifier of the response message, e.g. in synchronous responses, the Message-Id header field can be used instead. It identifies either a response or a signal message received synchronously.",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "dde12f67-c391-4851-8fa2-c07dd8532efd"
      },
      "Timestamp" : {
        "description" : "The Timestamp is the exact date and time at which the message was sent. It is provided by the client and verified by the server.",
        "required" : true,
        "schema" : {
          "format" : "date-time",
          "type" : "string"
        },
        "example" : "2021-06-17T08:30:00Z"
      },
      "Content-Type" : {
        "description" : "The content type of the subpart of the multipart message. The value MUST be One of IANA Media Types!",
        "required" : true,
        "schema" : {
          "type" : "string"
        },
        "example" : "application/json"
      }
    }
  }
}